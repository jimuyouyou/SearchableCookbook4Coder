<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>0a_code-ref</title>
	<link rel="stylesheet" href="../../css/main.css">
	<script src='../../lib/jquery-1.8.0.min.js'></script>
	<script src='../../lib/table_search.js'></script>
</head>
<body>
	<h2>AngularJS</h2>
	<table>
		<tr>
			<td>official site code - modules</td>
			<td>
				<xmp>
git code code: https://github.com/angular/angular.js
module: http://ngmodules.org/
official: http://www.angularjs.org
sample app: https://github.com/angular-app/angular-app
db host: https://mongolab.com/
</xmp>
			</td>
		</tr>
		<tr>
			<td>ng-init</td>
			<td>
				<xmp>
<body ng-app ng-init="name = 'World'">
<h1>Hello, {{name}}!</h1>
</body>					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>ng-model</td>
			<td>
				<xmp>
<body ng-app ng-init="name = 'World'">
Say hello to: <input type="text" ng-model="name">
<h1>Hello, {{name}}!</h1>
</body>					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>ng-controller</td>
			<td>
				<xmp>
<div ng-controller="HelloCtrl">
Say hello to: <input type="text" ng-model="name"><br>
<h1>Hello, {{name}}!</h1>
</div>

var HelloCtrl = function ($scope) {
$scope.name = 'World';
}					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>function</td>
			<td>
				<xmp>
var HelloCtrl = function ($scope) {
	$scope.getName = function() {
		return $scope.name;
	};
}

<h1>Hello, {{getName()}}!</h1>					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>ng-repeat</td>
			<td>
				<xmp>
<ul ng-controller="WorldCtrl">
	<li ng-repeat="country in countries">
	{{country.name}} has population of {{country.population}}
	</li>
	<hr>
	World's population: {{population}} millions
</ul>

var WorldCtrl = function ($scope) {
	$scope.population = 7000;
	$scope.countries = [
		{name: 'France', population: 63.1},
		{name: 'United Kingdom', population: 61.8},
	];
};					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>function Scopes hierarchy</td>
			<td>
				<xmp>
<li ng-repeat="country in countries">
	{{country.name}} has population of {{country.population}},
	{{worldsPercentage(country.population)}} % of the World's population
</li>

$scope.worldsPercentage = function (countryPopulation) {
	return (countryPopulation / $scope.population)*100;
}					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>inheritance scope parent</td>
			<td>
				<xmp>
<div ng-app ng-init="name='World'">
	<h1>Hello, {{name}}</h1>
	<div ng-controller="HelloCtrl">
		Say hello to: <input type="text" ng-model="name">
		<input type="text" ng-model="$parent.name">
		<h2>Hello, {{name}}!</h2>
	</div>
</div>					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>property object</td>
			<td>
				<xmp>
<body ng-app ng-init="thing = {name : 'World'}">
	<h1>Hello, {{thing.name}}</h1>
	<div ng-controller="HelloCtrl">
		Say hello to: <input type="text" ng-model="thing.name">
		<h2>Hello, {{thing.name}}!</h2>
	</div>
</body>					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>global events</td>
			<td>
				<xmp>
three events being emitted: ( $includeContentRequested ,$includeContentLoaded , $viewContentLoaded )
seven events being broadcasted: ( $locationChangeStart , $locationChangeSuccess , $routeUpdate ,
$routeChangeStart , $routeChangeSuccess , $routeChangeError , $destroy )
				</xmp>
			</td>
		</tr>
		<tr>
			<td>Scopes lifecycle destroy clear</td>
			<td>
				<xmp>
$new() and $destroy() methods, respectively (both methods are defined on the Scope type).			
				</xmp>
			</td>
		</tr>
		<tr>
			<td>ng-disabled</td>
			<td>
				<xmp>
<button ng-disabled="!hasValidLength()"...>Send</button>					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>ng-class</td>
			<td>
				<xmp>
<span ng-class="{'text-warning' : shouldWarn()}">
	Remaining: {{remaining()}}
</span>					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>modules</td>
			<td>
				<xmp>
<body ng-app="hello">					
angular.module('hello', [])
	.controller('HelloCtrl', function($scope){
	$scope.name = 'World';
});					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>service injection registration</td>
			<td>
				<xmp>
myMod.service('notificationsService', NotificationsService);
var NotificationsService = function (notificationsArchive) {
	this.notificationsArchive = notificationsArchive;
};					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>factory injection registration</td>
			<td>
				<xmp>
myMod.factory('notificationsService',function(notificationsArchive){
	var MAX_LEN = 10;
	var notifications = [];
	return {
		push:function (notification) {
			var notificationToArchive;
			var newLen = notifications.unshift(notification);
			//push method can rely on the closure scope now!
			if (newLen > MAX_LEN) {
				notificationToArchive = this.notifications.pop();
				notificationsArchive.archive(notificationToArchive);
			}
		},
		// other methods of the NotificationsService
	};
});
				</xmp>
			</td>
		</tr>
		<tr>
			<td>constant</td>
			<td>
				<xmp>
myMod.constant('MAX_LEN', 10);
myMod.factory('notificationsService',
function (notificationsArchive, MAX_LEN) {
	//creation logic doesn't change
});
				</xmp>
			</td>
		</tr>
		<tr>
			<td>provider injection registration</td>
			<td>
				<xmp>
myMod.provider('notificationsService', function () {
	var config = {
		maxLen : 10
	};
	var notifications = [];
	return {
		setMaxLen : function(maxLen) {
			config.maxLen = maxLen || config.maxLen;
		},
		$get : function(notificationsArchive) {
			return {
				push:function (notification) {
					...
					if (newLen > config.maxLen) {
					...
					}
				},
			// other methods go here
			};
		}
	};
});

a provider is a function that must return an object containing the $get property					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>config $rootScope</td>
			<td>
				<xmp>
myMod.config(function(notificationsServiceProvider){
	notificationsServiceProvider.setMaxLen(5);
});					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>run</td>
			<td>
				<xmp>
Application started at: {{appStarted}}					
angular.module('upTimeApp', []).run(function($rootScope) {
	$rootScope.appStarted = new Date();
});					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>phases and registration methods</td>
			<td>
				<xmp>
What gets registered? Injectable during the configuration phase? Injectable during the run phase?
Constant Constant's value Yes Yes
Variable Variable's value - Yes
Service A new object created by aconstructor function - Yes
Factory A new object returned from a factory function - Yes
Provider A new object created by the $get factory function Yes -
				</xmp>
			</td>
		</tr>
		<tr>
			<td>service module dependencies</td>
			<td>
				<xmp>
angular.module('app', ['engines', 'cars'])
angular.module('cars', [])
	.factory('car', function ($log, dieselEngine) {
		return {
			start: function() {
				$log.info('Starting ' + dieselEngine.type);
			}
	};
});
angular.module('engines', [])
	.factory('dieselEngine', function () {
		return {
			type: 'diesel'
		};
});				
A service defined in one of the application's modules is visible to all the
other modules. In other words, hierarchy of modules doesn't influence
services' visibility to other modules. When AngularJS bootstraps an
application, it combines all the services defined across all the modules
into one application, that is, global namespace.	
				</xmp>
			</td>
		</tr>
		<tr>
			<td>angular.module controller</td>
			<td>
				<xmp>
angular.module('admin-projects', [])
	.controller('ProjectsListCtrl', function($scope) {
		//controller's code go here
	})
	.controller('ProjectsEditCtrl', function($scope) {
		//controller's code go here
	});					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>angular.module config</td>
			<td>
				<xmp>
angular.module('admin-projects', [])
	.config(function() {
		//configuration block 1
	})
	.config(function() {
		//configuration block 2
	});					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>$timeout $log</td>
			<td>
				<xmp>
angular.module('async', [])
	.factory('asyncGreeter', function ($timeout, $log) {
		return {
			say:function (name, timeout) {
				$timeout(function(){
					$log.info("Hello, " + name + "!");
				})
			}
		};
	});					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>$http</td>
			<td>
				<xmp>
var futureResponse = $http.get('data.json');
futureResponse.success(function (data, status, headers, config) {
	$scope.data = data;
});
futureResponse.error(function (data, status, headers, config) {
	throw new Error('Something went wrong...');
});	

$http(configObject);

methods:
•	 GET: $http.get(url, config)
•	 POST: $http.post(url, data, config)
•	 PUT: $http.put(url, data, config)
•	 DELETE: $http.delete(url, config)
•	 HEAD: $http.head
It is also possible to trigger a JSONP request with $http.jsonp(url, config);

config:
•	 method : HTTP method to be issued
•	 url : URL to be targeted with a request
•	 params : parameters to be added to the URL query string
•	 headers : additional headers to be added to a request
•	 timeout : timeout (in milliseconds) after which a XHR request will be dropped
•	 cache : enables XHR GET request caching
•	 transformRequest , transformResponse : transformation functions that allows us to pre-process and post-process data exchanged with a back-end			
				</xmp>
			</td>
		</tr>
		<tr>
			<td>$http.post</td>
			<td>
				<xmp>
var userToAdd = {
	name:'AngularJS Superhero',
	email:'superhero@angularjs.org'
};
$http.post('https://api.mongolab.com/api/1/databases/ascrum/collec
	tions/users',
	userToAdd, {
	params:{
		apiKey:'4fb51e55e4b02e56a67b0b66'
	}
});					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>jsonp</td>
			<td>
				<xmp>
$http.jsonp('http://angularjs.org/greet.php?callback=JSON_CALLBACK', {
	params:{name:'World'}
}).success(function (data) {
	$scope.greeting = data;
});					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>$q $digest promise deferred.promise resolve reject</td>
			<td>
				<xmp>
var Restaurant = function ($q, $rootScope) {
	var currentOrder;
	this.takeOrder = function (orderedItems) {
		currentOrder = {
			deferred:$q.defer(),
			items:orderedItems
		};
		return currentOrder.deferred.promise;
	};

	this.deliverOrder = function() {
		currentOrder.deferred.resolve(currentOrder.items);
		$rootScope.$digest();
	};

	this.problemWithOrder = function(reason) {
		currentOrder.deferred.reject(reason);
		$rootScope.$digest();
	};
}					
				</xmp>
			</td>
		</tr>
		<tr>
			<td>$http promise</td>
			<td>
				<xmp>
var responsePromise = $http.get('data.json');
responsePromise.then(function (response) {
	$scope.data = response.data;
},function (response) {
	throw new Error('Something went wrong...');
});			
Promises returned from the $http services are resolved with the response object
which has the following properties: data , status , headers and config .

Calls to the $http service methods return promises with two additional
methods (success and error) for easy callback registration.		
				</xmp>
			</td>
		</tr>
		<tr>
			<td>$resource</td>
			<td>
				<xmp>
The $resource service is distributed in a separate file (angular-
resource.js), and resides in a dedicated module (ngResource).
To take advantage of the $resource service we need to include
the angular-resource.js file and declare dependency on the
ngResource module from our application's module.

angular.module('resource', ['ngResource'])
	.factory('Users', function ($resource) {
		return	$resource('https://api.mongolab.com/api/1/databases/ascrum/collections/users/:id', {
			apiKey:'4fb51e55e4b02e56a67b0b66',
			id:'@_id.$oid'  //Dynamic parameter values are prefixed with a @ character
		});
})		

.controller('ResourceCtrl', function($scope, Users){
	$scope.users = Users.query();
});	

methods available:
query, get, save and delete

•	 Users.query(params, successcb, errorcb) : It issues an HTTP GET request and expects an array in the JSON response. It is used to retrieve a collection of items.
•	 Users.get(params, successcb, errorcb) : It issues an HTTP GET request and expects an object in the JSON response. It is used to retrieve a single item.
•	 Users.save(params, payloadData, successcb, errorcb) : It issues an HTTP POST request with request body generated from the payload.
•	 Users.delete(params,successcb, errorcb) (and its alias: Users.remove ): It issues an HTTP DELETE request.

Users.delete({}, user); === user.$delete();

var user = new Users({
	name:'Superhero'
});
user.$save();
===
var user = {
	name:'Superhero'
};
Users.save(user);

Users.query(function(users){
	$scope.users = users;
	console.log($scope.users.length);
});
				</xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
		<tr>
			<td></td>
			<td>
				<xmp></xmp>
			</td>
		</tr>
	</table>
	
</body>
<!--
<script src='lib/angular1.2.js'></script>
-->
</html>